{% load static %}

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!--[if IE]>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <![endif]-->
    <title>JuLE</title>
    <!-- BOOTSTRAP CORE STYLE  -->
    <link href="{% static 'css/bootstrap.css' %}" rel="stylesheet" />
    <!-- FONT AWESOME ICONS  -->
    <link href="{% static 'css/font-awesome.css' %}" rel="stylesheet" />
    <!-- CUSTOM STYLE  -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet" />
    <link href="{% static 'css/mystyle.css' %}" rel="stylesheet" />
     <!-- HTML5 Shiv and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link href="{% static 'css/smart_wizard.css' %}" rel="stylesheet" type="text/css" />    
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
    
    <link href="{% static 'css/pnotify.custom.min.css' %}" media="all" rel="stylesheet" type="text/css" />

    <!-- Optional SmartWizard theme -->
    <link href="{% static 'css/smart_wizard_theme_circles.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/smart_wizard_theme_arrows.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/smart_wizard_theme_dots.css' %}" rel="stylesheet" type="text/css" />
</head>
<body>
    <div class="navbar navbar-inverse set-radius-zero">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="{% url 'home' %}">

                    <img src="{% static 'img/logo1.png' %}" />
                </a>

            </div>

            <div class="left-div">
                <div class="user-settings-wrapper">
                    <ul class="nav">

                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                                <span class="glyphicon glyphicon-user" style="font-size: 25px;"></span>
                            </a>
                            <div class="dropdown-menu dropdown-settings">
                                <div class="media">
                                    <a class="media-left" href="#">
                                        <img src="{% static 'img/64-64.jpg' %}" alt="" class="img-rounded" />
                                    </a>
                                    <div class="media-body">
                                        <h4 class="media-heading">{{ user.profile.facultyid.facultyname }}</h4>
                                    </div>
                                </div>
                                <hr />
                                <a href="{% url 'logout' %}" class="btn btn-danger btn-sm">Logout</a>

                            </div>
                        </li>


                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- LOGO HEADER END-->
    <section class="menu-section">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="navbar-collapse collapse ">
                        <ul id="menu-top" class="nav navbar-nav navbar-right">
                            <li><a href="{% url 'home' %}">Lab Activities</a></li>
                            <li><a href="{% url 'progress' %}">Progress Tracker</a></li>
                            <li><a href="{% url 'grade' %}" class="menu-top-active">Score</a></li>
                            <li><a href="{% url 'group' %}">Groups</a></li>
                            <li><a href="{% url 'student' %}">Students</a></li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </section>
    <!-- MENU SECTION END-->
    <div class="content-wrapper">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h4 class="page-head-line">Score</h4>
                </div>
            </div>

            {% for studentgroup in studentgroups %}
                {% for profile in profiles %}
                    {% if studentgroup == profile.groupid %}
                        {% if profile.loggedin %}
                            <div class="panel panel-success">
                        {% else %}
                            <div class="panel panel-default">
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <div class="panel-heading">
                    <h4 class="panel-title">
                        {{ studentgroup.groupname }}
                    </h4>
                </div>
                <div class="panel-body">
                    <table class="table" id="datatable{{ studentgroup.groupid }}">
                        <thead>
                            <tr>
                                <th>Lab Activity</th>
                                <th>Score</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>

                    {% for labactivity in labactivities %}
                        <script>
                            var temp = 0;
                        </script>
                        {% for groupgrade in groupgrades %}
                            {% if groupgrade.labid == labactivity and groupgrade.groupid == studentgroup %}
                                <script>
                                    temp++;
                                </script>
                            {% endif %}
                        {% endfor %}
                        <script>
                            if(temp > 0) {
                                document.write("<tr>");
                            }
                            else {
                                document.write("<tr style='display:none'>");
                            }
                        </script>
                            <td><a href="{% url 'grade_lab' %}?labid={{ labactivity.labid }}&groupid={{ studentgroup.groupid }}">{{ labactivity.labname }}</a></td>
                            <script>
                                var grade = 0;
                            </script>
                            
                            {% for groupgrade in groupgrades %}
                                {% if groupgrade.groupid == studentgroup and groupgrade.labid == labactivity %}
                                    <script>
                                        grade = grade + {{ groupgrade.grade }};
                                    </script>
                                {% endif %}
                            {% endfor %}
                            <td><script> document.write(grade) </script> / {{ labactivity.maximumpoint }}</td>
                            <script> 
                                var percent = parseFloat(grade / {{ labactivity.maximumpoint }} * 100).toFixed(2);
                            </script>
                            <td><script> document.write(percent) </script>%</td>
                        </tr>
                    {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <!-- CONTENT-WRAPPER SECTION END-->
    <!-- <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    &copy; 2015 YourCompany | By : <a href="http://www.designbootstrap.com/" target="_blank">DesignBootstrap</a>
                </div>

            </div>
        </div>
    </footer> -->
    <!-- FOOTER SECTION END-->
    <!-- JAVASCRIPT AT THE BOTTOM TO REDUCE THE LOADING TIME  -->
    <!-- CORE JQUERY SCRIPTS -->
    <script src="{% static 'js/jquery-1.11.1.js' %}"></script>
    <!-- BOOTSTRAP SCRIPTS  -->
    <script src="{% static 'js/bootstrap.js' %}"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <script src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>

    <script type="text/javascript" src="{% static 'js/pnotify.custom.min.js' %}"></script>

    {% for studentgroup in studentgroups %}
    <script type="text/javascript">
        $(document).ready(function(){
            $('#datatable{{ studentgroup.groupid }}').DataTable({
                "bInfo": false,
                "bPaginate": false,
                "searching": false,

                "columns": [
                    null,
                    { "width": "10%" },
                    { "width": "10%" }
                  ]
            });
        });
    </script>
    {% endfor %}

    <!-- <script type="text/javascript">
        $(function(){
            new PNotify({
                title: 'Success!',
                text: 'Yes',
                type: 'success',
                animate_speed: 'fast'
            });
        });
    </script> -->

    <!-- Include SmartWizard JavaScript source -->
</body>
</html>
